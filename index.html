<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Zen Tasks - Gestión Completa</title>
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>◉</text></svg>">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
    <link rel='stylesheet' href='css/styles.css'>
</head>

<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="header-left">
                <h1>◉ Zen Tasks</h1>
                <p>Gestión completa de tareas y hábitos</p>
            </div>
            <div class="header-right">
                <button class="settings-btn" onclick="openSettingsModal()">
                    <span>⚙</span>
                    <span>Config</span>
                </button>
                <button class="theme-toggle" onclick="toggleTheme()">
                    <span>◐</span>
                    <span id="themeText">Oscuro</span>
                </button>
            </div>
        </div>

        <!-- Stats -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-number" id="totalCount">0</div>
                <div class="stat-label">Total Tareas</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="pendingCount">0</div>
                <div class="stat-label">Pendientes</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="completedCount">0</div>
                <div class="stat-label">Completadas</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="highPriorityCount">0</div>
                <div class="stat-label">Alta Prioridad</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="habitsCount">0</div>
                <div class="stat-label">Hábitos Activos</div>
            </div>
        </div>

        <!-- Main Grid -->
        <div class="main-grid">
            <!-- Kanban -->
            <div class="card">
                <div class="card-header">
                    <div class="card-title">
                        <span>◈</span>
                        Tablero Kanban
                    </div>
                </div>
                <div class="card-body">
                    <div class="kanban-container">
                        <div class="kanban-column kanban-pending" id="colPending" ondrop="drop(event, 'pending')"
                            ondragover="allowDrop(event)" ondragenter="dragEnter(event)" ondragleave="dragLeave(event)">
                            <div class="kanban-header">
                                <span>⏳</span> Por Hacer
                            </div>
                            <div id="kanbanPending"></div>
                            <button class="add-task-btn" onclick="openModal('kanban')">+ Agregar tarea</button>
                        </div>
                        <div class="kanban-column kanban-progress" id="colProgress" ondrop="drop(event, 'progress')"
                            ondragover="allowDrop(event)" ondragenter="dragEnter(event)" ondragleave="dragLeave(event)">
                            <div class="kanban-header">
                                <span>▶</span> En Proceso
                            </div>
                            <div id="kanbanProgress"></div>
                        </div>
                        <div class="kanban-column kanban-done" id="colDone" ondrop="drop(event, 'done')"
                            ondragover="allowDrop(event)" ondragenter="dragEnter(event)" ondragleave="dragLeave(event)">
                            <div class="kanban-header">
                                <span>✔</span> Completadas
                            </div>
                            <div id="kanbanDone"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Calendar -->
            <div class="card">
                <div class="card-header">
                    <div class="card-title">
                        <span>◐</span>
                        Calendario
                    </div>
                </div>
                <div class="card-body">
                    <div class="calendar-nav">
                        <div class="calendar-views">
                            <button class="view-btn" id="viewDay" onclick="setCalendarView('day')">Día</button>
                            <button class="view-btn" id="viewWeek" onclick="setCalendarView('week')">Semana</button>
                            <button class="view-btn active" id="viewMonth"
                                onclick="setCalendarView('month')">Mes</button>
                        </div>
                        <div class="calendar-nav-arrows">
                            <button class="nav-arrow" onclick="navigateCalendar(-1)">◀</button>
                            <span class="current-period" id="currentPeriod"></span>
                            <button class="nav-arrow" onclick="navigateCalendar(1)">▶</button>
                        </div>
                    </div>
                    <div class="calendar-grid" id="calendarGrid"></div>
                </div>
            </div>
        </div>

        <!-- Habits Section -->
        <div class="habits-section">
            <div class="card">
                <div class="card-header">
                    <div class="card-title">
                        <span>◉</span>
                        Hábitos
                    </div>
                    <button class="btn-secondary" onclick="openModal('habit')">+ Nuevo Hábito</button>
                </div>
                <div class="card-body" id="habitsList"></div>
            </div>
        </div>

        <!-- Tasks List -->
        <div class="tasks-section">
            <div class="card">
                <div class="card-header">
                    <div class="card-title">
                        <span>◑</span>
                        Mis Tareas
                    </div>
                    <div style="display: flex; gap: 8px;">
                        <div class="search-box">
                            <input type="text" placeholder="Buscar tareas..." oninput="searchTasks(this.value)">
                        </div>
                    </div>
                </div>
                <div class="card-body">
                    <div class="filters" style="margin-bottom: 16px;">
                        <button class="filter-btn active" onclick="setFilter('all', this)">Todas</button>
                        <button class="filter-btn" onclick="setFilter('pending', this)">Pendientes</button>
                        <button class="filter-btn" onclick="setFilter('completed', this)">Completadas</button>
                        <button class="filter-btn" onclick="setFilter('today', this)">Hoy</button>
                    </div>
                    <div class="tasks-list" id="tasksList"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- FAB -->
    <button class="fab" onclick="openModal('task')">+</button>

    <!-- Modal -->
    <div class="modal-overlay" id="modalOverlay" onclick="closeModal(event)">
        <div class="modal" id="modalContent" onclick="event.stopPropagation()">
            <div class="modal-header">
                <div class="modal-title" id="modalTitle">Nueva Tarea</div>
                <button class="modal-close" onclick="closeModal()">×</button>
            </div>
            <div class="modal-body" id="modalBody"></div>
        </div>
    </div>

    <!-- Alarm Overlay -->
    <div class="alarm-overlay" id="alarmOverlay">
        <div class="alarm-content">
            <h2>⏰ ¡Tiempo Completado!</h2>
            <p id="alarmMessage">La tarea ha terminado</p>
            <button class="alarm-btn" onclick="stopAlarm()">Detener Alarma</button>
        </div>
    </div>

    <!-- Settings Modal -->
    <div class="modal-overlay" id="settingsOverlay" onclick="closeSettingsModal(event)">
        <div class="modal settings-modal" onclick="event.stopPropagation()">
            <div class="modal-header">
                <div class="modal-title">⚙ Configuración</div>
                <button class="modal-close" onclick="closeSettingsModal()">×</button>
            </div>
            <div class="modal-body" style="padding: 0;">
                <div class="settings-container">
                    <div class="settings-sidebar">
                        <div class="settings-tab active" onclick="switchSettingsTab('general', this)">
                            <span>⚡</span> General
                        </div>
                        <div class="settings-tab" onclick="switchSettingsTab('audio', this)">
                            <span>🔊</span> Audio
                        </div>
                        <div class="settings-tab" onclick="switchSettingsTab('data', this)">
                            <span>💾</span> Datos
                        </div>
                        <div class="settings-tab" onclick="switchSettingsTab('about', this)">
                            <span>ℹ</span> Acerca
                        </div>
                    </div>
                    <div class="settings-content">
                        <div id="settings-general" class="settings-section active">
                            <h3>Configuración General</h3>
                            <div class="setting-item">
                                <div class="setting-label">🔔 Notificaciones</div>
                                <div class="setting-description">Activar notificaciones de escritorio para recordatorios
                                </div>
                                <div class="settings-toggle">
                                    <div class="toggle-switch active" id="toggle-notifications"
                                        onclick="toggleSetting('notifications')"></div>
                                    <span id="notifications-status">Activadas</span>
                                </div>
                            </div>
                            <div class="setting-item">
                                <div class="setting-label">🎨 Animaciones</div>
                                <div class="setting-description">Mostrar animaciones en la interfaz</div>
                                <div class="settings-toggle">
                                    <div class="toggle-switch active" id="toggle-animations"
                                        onclick="toggleSetting('animations')"></div>
                                    <span id="animations-status">Activadas</span>
                                </div>
                            </div>
                        </div>
                        <div id="settings-audio" class="settings-section">
                            <h3>Configuración de Audio</h3>
                            <div id="settings-audio-content"></div>
                        </div>
                        <div id="settings-data" class="settings-section">
                            <h3>Gestión de Datos</h3>
                            <div class="setting-item">
                                <div class="setting-label">📤 Exportar Datos</div>
                                <div class="setting-description">Descarga todos tus datos para respaldarlos</div>
                                <div class="export-import-btns">
                                    <button class="btn-secondary" onclick="exportData()">📥 Exportar JSON</button>
                                </div>
                            </div>
                            <div class="setting-item">
                                <div class="setting-label">📥 Importar Datos</div>
                                <div class="setting-description">Restaura tus datos desde un archivo JSON</div>
                                <input type="file" id="import-file" accept=".json" style="display: none;"
                                    onchange="importData(this)">
                                <button class="btn-secondary"
                                    onclick="document.getElementById('import-file').click()">📤 Importar JSON</button>
                            </div>
                            <div class="setting-item">
                                <div class="setting-label">🗑️ Borrar Todo</div>
                                <div class="setting-description">Elimina todas las tareas, hábitos y datos guardados
                                </div>
                                <button class="btn-secondary" onclick="clearAllData()"
                                    style="background: var(--danger); color: white;">⚠️ Borrar Todos los Datos</button>
                            </div>
                        </div>
                        <div id="settings-about" class="settings-section">
                            <h3>Acerca de Zen Tasks</h3>
                            <div class="setting-item">
                                <div class="setting-label">◉ Zen Tasks</div>
                                <div class="setting-description">Versión 1.0 - Gestión completa de tareas y hábitos con
                                    temporizadores, calendario y seguimiento de hábitos.</div>
                            </div>
                            <div class="setting-item">
                                <div class="setting-label">✨ Características</div>
                                <div class="setting-description">
                                    • Tablero Kanban con temporizadores<br>
                                    • Calendario con vista de día, semana y mes<br>
                                    • Seguimiento de hábitos con rachas<br>
                                    • Alarmas con audio personalizable<br>
                                    • Notificaciones de escritorio<br>
                                    • Modo oscuro/claro
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Notification -->
    <div class="notification" id="notification"></div>

    <script src='js/app.js'></script>
</body>

</html>